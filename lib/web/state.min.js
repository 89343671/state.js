!function t(i,e,n){function o(s,a){if(!e[s]){if(!i[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=e[s]={exports:{}};i[s][0].call(h.exports,function(t){var e=i[s][1][t];return o(e?e:t)},h,h.exports,t,i,e,n)}return e[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,i,e){"use strict";var n=this&&this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)};!function(t){t[t.Choice=0]="Choice",t[t.DeepHistory=1]="DeepHistory",t[t.Initial=2]="Initial",t[t.Junction=3]="Junction",t[t.ShallowHistory=4]="ShallowHistory"}(e.PseudoStateKind||(e.PseudoStateKind={}));var o=e.PseudoStateKind;!function(t){t[t.External=0]="External",t[t.Internal=1]="Internal",t[t.Local=2]="Local"}(e.TransitionKind||(e.TransitionKind={}));var r=e.TransitionKind,s=function(){function t(i,e){this.name=i,this.parent=e,this.qualifiedName=e?e.toString()+t.namespaceSeparator+i:i,console.log("created "+this)}return t.prototype.getAncestors=function(){return this.parent.getAncestors().concat(this)},t.prototype.getRoot=function(){return this.parent.getRoot()},t.prototype.toString=function(){return this.qualifiedName},t.prototype.accept=function(t,i){t.visitElement(this,i)},t.namespaceSeparator=".",t}();e.NamedElement=s;var a=function(t){function i(i,e){t.call(this,i,e),this.vertices=new Array,this.parent.regions.push(this),this.getRoot().clean=!1}return n(i,t),i.prototype.accept=function(t,i){t.visitRegion(this,i)},i.defaultName="default",i}(s);e.Region=a;var u=function(t){function i(i,e){t.call(this,i,e instanceof a?e:e.getDefaultRegion()),this.outgoing=new Array,this.incoming=new Array,this.parent.vertices.push(this),this.getRoot().clean=!1}return n(i,t),i.prototype.to=function(t,i){return void 0===i&&(i=r.External),new f(this,t,i)},i.prototype.accept=function(t,i){t.visitVertex(this,i)},i}(s);e.Vertex=u;var c=function(t){function i(i,e,n){void 0===n&&(n=o.Initial),t.call(this,i,e),this.kind=n}return n(i,t),i.prototype.isHistory=function(){return this.kind===o.DeepHistory||this.kind===o.ShallowHistory},i.prototype.isInitial=function(){return this.kind===o.Initial||this.isHistory()},i.prototype.accept=function(t,i){t.visitPseudoState(this,i)},i}(u);e.PseudoState=c;var h=function(t){function i(i,e){t.call(this,i,e),this.regions=new Array,this.entryBehavior=new Array,this.exitBehavior=new Array}return n(i,t),i.prototype.getDefaultRegion=function(){return this.defaultRegion||(this.defaultRegion=new a(a.defaultName,this))},i.prototype.isFinal=function(){return 0===this.outgoing.length},i.prototype.isSimple=function(){return 0===this.regions.length},i.prototype.isComposite=function(){return this.regions.length>0},i.prototype.isOrthogonal=function(){return this.regions.length>1},i.prototype.exit=function(t){return this.exitBehavior.push(t),this.getRoot().clean=!1,this},i.prototype.enter=function(t){return this.exitBehavior.push(t),this.getRoot().clean=!1,this},i.prototype.accept=function(t,i){t.visitState(this,i)},i}(u);e.State=h;var p=function(){function t(t){this.name=t,this.regions=new Array,this.defaultRegion=void 0,this.clean=!1,this.onInitialise=new Array}return t.prototype.getDefaultRegion=function(){return this.defaultRegion||(this.defaultRegion=new a(a.defaultName,this))},t.prototype.getAncestors=function(){return[this]},t.prototype.getRoot=function(){return this},t.prototype.accept=function(t,i){t.visitStateMachine(this,i)},t.prototype.toString=function(){return this.name},t}();e.StateMachine=p;var f=function(){function t(t,i,e){var n=this;void 0===e&&(e=r.External),this.source=t,this.target=i,this.kind=e,this.effectBehavior=new Array,this.onTraverse=new Array,this.guard=t instanceof c?function(){return!0}:function(t){return t===n.source},this.source.outgoing.push(this),this.source.getRoot().clean=!1,this.target?this.target.incoming.push(this):this.kind=r.Internal,console.log("created transition from "+t+" to "+i)}return t.prototype.else=function(){return this.guard=function(){return!1},this},t.prototype.when=function(t){return this.guard=t,this},t.prototype.effect=function(t){return this.effectBehavior.push(t),this.source.getRoot().clean=!1,this},t.prototype.accept=function(t,i){t.visitTransition(this,i)},t.prototype.toString=function(){return r[this.kind]+"("+(this.kind===r.Internal?this.source:this.source+" -> "+this.target)+")"},t}();e.Transition=f;var l=function(){function t(){}return t.prototype.visitElement=function(t,i){console.log("visiting "+t.toString())},t.prototype.visitRegion=function(t,i){for(var e=0,n=t.vertices;e<n.length;e++){var o=n[e];o.accept(this,i)}this.visitElement(t,i)},t.prototype.visitVertex=function(t,i){for(var e=0,n=t.outgoing;e<n.length;e++){var o=n[e];o.accept(this,i)}this.visitElement(t,i)},t.prototype.visitPseudoState=function(t,i){this.visitVertex(t,i)},t.prototype.visitState=function(t,i){for(var e=0,n=t.regions;e<n.length;e++){var o=n[e];o.accept(this,i)}this.visitVertex(t,i)},t.prototype.visitStateMachine=function(t,i){for(var e=0,n=t.regions;e<n.length;e++){var o=n[e];o.accept(this,i)}this.visitElement(t,i)},t.prototype.visitTransition=function(t,i){console.log("visiting "+t)},t}();e.Visitor=l;var g=function(){function t(){this.activeStateConfiguration={}}return t.prototype.setCurrent=function(t,i){this.activeStateConfiguration[t.qualifiedName]=i},t.prototype.getCurrent=function(t){return this.activeStateConfiguration[t.qualifiedName]},t}();e.DictionaryInstance=g},{}],2:[function(t,i,e){window[((document.currentScript||document.getElementsByTagName("script")[scripts.length-1]).attributes.target||{textContent:"fsm"}).textContent]=t("../lib/node/state.js")},{"../lib/node/state.js":1}]},{},[2]);
