# fsm

Namespace for the finite state machine classes.



* * *

## Class: Element
An abstract class used as the base for the Region and Vertex classes.
An element is any part of the tree structure that represents a composite state machine model.

**namespaceSeparator**: `string` , The symbol used to separate element names within a fully qualified name.
Change this static member to create different styles of qualified name generated by the toString method.
### fsm.Element.Element(name) 

Creates a new instance of the element class.

**Parameters**

**name**: `string`, The name of the element.


### fsm.Element.getParent() 

Returns the parent element of this element.

**Returns**: `Element`, The parent element of the element.

### fsm.Element.root() 

Returns the root element within the state machine model.

**Returns**: `StateMachine`, The root state machine element.

### fsm.Element.ancestors() 

Returns the ancestors of the element.
The ancestors are returned as an array of elements, staring with the root element and ending with this elemenet.


### fsm.Element.accept(visitor, arg) 

Accepts an instance of a visitor.

**Parameters**

**visitor**: `Visitor.&lt;TArg&gt;`, The visitor instance.

**arg**: `TArg`, An optional argument to pass into the visitor.

**Returns**: `any`, Any value can be returned by the visitor.

### fsm.Element.toString() 

Returns a the element name as a fully qualified namespace.

**Returns**: `string`


## Class: Vertex
An abstract element within a state machine model that can be the source or target of a transition (states and pseudo states).

Vertex extends the Element class and inherits its public interface.

**transitions**: `Array.&lt;Transition&gt;` , The set of transitions from this vertex.
### fsm.Vertex.Vertex(name, parent) 

Creates a new instance of the Vertex class.

**Parameters**

**name**: `string`, The name of the vertex.

**parent**: `Region | State`, The parent region or state.


### fsm.Vertex.getParent() 

Returns the parent element of this vertex.

**Returns**: `Element`, The parent element of the vertex.

### fsm.Vertex.to(target) 

Creates a new transition from this vertex.
Newly created transitions are completion transitions; they will be evaluated after a vertex has been entered if it is deemed to be complete.
Transitions can be converted to be event triggered by adding a guard condition via the transitions `where` method.

**Parameters**

**target**: `Vertex`, The destination of the transition; omit for internal transitions.

**Returns**: `Transition`, The new transition object.


## Class: PseudoState
An element within a state machine model that represents an transitory Vertex within the state machine model.

Pseudo states are required in all state machine models; at the very least, an `Initial` pseudo state is the default stating state when the parent region is entered.
Other types of pseudo state are available; typically for defining history semantics or to facilitate more complex transitions.
A `Terminate` pseudo state kind is also available to immediately terminate processing within the entire state machine instance.

PseudoState extends the Vertex class and inherits its public interface.

### fsm.PseudoState.PseudoState(name, parent, kind) 

Creates a new instance of the PseudoState class.

**Parameters**

**name**: `string`, The name of the pseudo state.

**parent**: `Element`, The parent element that this pseudo state will be a child of.

**kind**: `PseudoStateKind`, Determines the behaviour of the PseudoState.


### fsm.PseudoState.isHistory() 

Tests a pseudo state to determine if it is a history pseudo state.
History pseudo states are of kind: Initial, ShallowHisory, or DeepHistory.

**Returns**: `boolean`, True if the pseudo state is a history pseudo state.

### fsm.PseudoState.isInitial() 

Tests a pseudo state to determine if it is an initial pseudo state.
Initial pseudo states are of kind: Initial, ShallowHisory, or DeepHistory.

**Returns**: `boolean`, True if the pseudo state is an initial pseudo state.

### fsm.PseudoState.accept(visitor, arg1, arg2, arg3, arg4) 

Accepts an instance of a visitor and calls the visitPseudoState method on it.

**Parameters**

**visitor**: `Visitor.&lt;TArg1&gt;`, The visitor instance.

**arg1**: `TArg1`, An optional argument to pass into the visitor.

**arg2**: `any`, An optional argument to pass into the visitor.

**arg3**: `any`, An optional argument to pass into the visitor.

**arg4**: `any`, An optional argument to pass into the visitor.

**Returns**: `any`, Any value can be returned by the visitor.


## Class: PseudoStateKind
An enumeration of static constants that dictates the precise behaviour of pseudo states.

Use these constants as the `kind` parameter when creating new `PseudoState` instances.

**Initial**: `number` , Used for pseudo states that are always the staring point when entering their parent region.

**ShallowHistory**: `number` , Used for pseudo states that are the the starting point when entering their parent region for the first time; subsequent entries will start at the last known state.

**DeepHistory**: `number` , As per `ShallowHistory` but the history semantic cascades through all child regions irrespective of their initial pseudo state kind.

**Choice**: `number` , Enables a dynamic conditional branches; within a compound transition.
All outbound transition guards from a Choice are evaluated upon entering the PseudoState:
if a single transition is found, it will be traversed;
if many transitions are found, an arbitary one will be selected and traversed;
if none evaluate true, and there is no 'else transition' defined, the machine is deemed illformed and an exception will be thrown.

**Junction**: `number` , Enables a static conditional branches; within a compound transition.
All outbound transition guards from a Choice are evaluated upon entering the PseudoState:
if a single transition is found, it will be traversed;
if many or none evaluate true, and there is no 'else transition' defined, the machine is deemed illformed and an exception will be thrown.

**Terminate**: `number` , Entering a terminate `PseudoState` implies that the execution of this state machine by means of its state object is terminated.

## Class: Region
An element within a state machine model that is a container of Vertices.

Regions are implicitly inserted into composite state machines as a container for vertices.
They only need to be explicitly defined if orthogonal states are required.

Region extends the Element class and inherits its public interface.

**vertices**: `Array.&lt;Vertex&gt;` , The set of vertices that are children of the region.
**defaultName**: `string` , The name given to regions that are are created automatically when a state is passed as a vertex's parent.
Regions are automatically inserted into state machine models as the composite structure is built; they are named using this static member.
Update this static member to use a different name for default regions.
### fsm.Region.Region(name, state) 

Creates a new instance of the Region class.

**Parameters**

**name**: `string`, The name of the region.

**state**: `State`, The parent state that this region will be a child of.


### fsm.Region.getParent() 

Returns the parent element of this region.

**Returns**: `Element`, The parent element of the region.

### fsm.Region.accept(visitor, arg1, arg2, arg3, arg4) 

Accepts an instance of a visitor and calls the visitRegion method on it.

**Parameters**

**visitor**: `Visitor.&lt;TArg1&gt;`, The visitor instance.

**arg1**: `TArg1`, An optional argument to pass into the visitor.

**arg2**: `any`, An optional argument to pass into the visitor.

**arg3**: `any`, An optional argument to pass into the visitor.

**arg4**: `any`, An optional argument to pass into the visitor.

**Returns**: `any`, Any value can be returned by the visitor.


## Class: State
An element within a state machine model that represents an invariant condition within the life of the state machine instance.

States are one of the fundamental building blocks of the state machine model.
Behaviour can be defined for both state entry and state exit.

State extends the Vertex class and inherits its public interface.

**regions**: `Array.&lt;Region&gt;` , The set of regions under this state.
### fsm.State.State(name, parent) 

Creates a new instance of the State class.

**Parameters**

**name**: `string`, The name of the state.

**parent**: `Element`, The parent state that owns the state.


### fsm.State.defaultRegion() 

Returns the default region for the state.
Note, this will create the default region if it does not already exist.

**Returns**: `Region`, The default region.

### fsm.State.isFinal() 

Tests the state to see if it is a final state;
a final state is one that has no outbound transitions.

**Returns**: `boolean`, True if the state is a final state.

### fsm.State.isSimple() 

Tests the state to see if it is a simple state;
a simple state is one that has no child regions.

**Returns**: `boolean`, True if the state is a simple state.

### fsm.State.isComposite() 

Tests the state to see if it is a composite state;
a composite state is one that has one or more child regions.

**Returns**: `boolean`, True if the state is a composite state.

### fsm.State.isOrthogonal() 

Tests the state to see if it is an orthogonal state;
an orthogonal state is one that has two or more child regions.

**Returns**: `boolean`, True if the state is an orthogonal state.

### fsm.State.exit(exitAction) 

Adds behaviour to a state that is executed each time the state is exited.

**Parameters**

**exitAction**: `Action`, The action to add to the state's exit behaviour.

**Returns**: `State`, Returns the state to allow a fluent style API.

### fsm.State.entry(entryAction) 

Adds behaviour to a state that is executed each time the state is entered.

**Parameters**

**entryAction**: `Action`, The action to add to the state's entry behaviour.

**Returns**: `State`, Returns the state to allow a fluent style API.

### fsm.State.accept(visitor, arg1, arg2, arg3, arg4) 

Accepts an instance of a visitor and calls the visitState method on it.

**Parameters**

**visitor**: `Visitor.&lt;TArg1&gt;`, The visitor instance.

**arg1**: `TArg1`, An optional argument to pass into the visitor.

**arg2**: `any`, An optional argument to pass into the visitor.

**arg3**: `any`, An optional argument to pass into the visitor.

**arg4**: `any`, An optional argument to pass into the visitor.

**Returns**: `any`, Any value can be returned by the visitor.


## Class: FinalState
An element within a state machine model that represents completion of the life of the containing Region within the state machine instance.

A final state cannot have outbound transitions.

FinalState extends the State class and inherits its public interface.

### fsm.FinalState.FinalState(name, parent) 

Creates a new instance of the FinalState class.

**Parameters**

**name**: `string`, The name of the final state.

**parent**: `Element`, The parent element that owns the final state.


### fsm.FinalState.accept(visitor, arg) 

Accepts an instance of a visitor and calls the visitFinalState method on it.

**Parameters**

**visitor**: `Visitor.&lt;TArg&gt;`, The visitor instance.

**arg**: `TArg`, An optional argument to pass into the visitor.

**Returns**: `any`, Any value can be returned by the visitor.


## Class: Visitor
Implementation of a visitor pattern.

### fsm.Visitor.visitElement(element, arg1, arg2, arg3, arg4) 

Visits an element within a state machine model.

**Parameters**

**element**: `Element`, the element being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.

### fsm.Visitor.visitRegion(region, arg1, arg2, arg3, arg4) 

Visits a region within a state machine model.

**Parameters**

**region**: `Region`, The region being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.

### fsm.Visitor.visitVertex(vertex, arg1, arg2, arg3, arg4) 

Visits a vertex within a state machine model.

**Parameters**

**vertex**: `Vertex`, The vertex being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.

### fsm.Visitor.visitPseudoState(pseudoState, arg1, arg2, arg3, arg4) 

Visits a pseudo state within a state machine model.

**Parameters**

**pseudoState**: `PseudoState`, The pseudo state being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.

### fsm.Visitor.visitState(state, arg1, arg2, arg3, arg4) 

Visits a state within a state machine model.

**Parameters**

**state**: `State`, The state being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.

### fsm.Visitor.visitFinal(finalState, arg1, arg2, arg3, arg4) 

Visits a final state within a state machine model.

**Parameters**

**finalState**: `FinalState`, The final state being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.

### fsm.Visitor.visitVertex(state, arg1, arg2, arg3, arg4) 

Visits a state machine within a state machine model.

**Parameters**

**state**: `StateMachine`, machine The state machine being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.

### fsm.Visitor.visitTransition(transition, arg1, arg2, arg3, arg4) 

Visits a transition within a state machine model.

**Parameters**

**transition**: `Transition`, The transition being visited.

**arg1**: `TArg1`, An optional parameter passed into the accept method.

**arg2**: `any`, An optional parameter passed into the accept method.

**arg3**: `any`, An optional parameter passed into the accept method.

**arg4**: `any`, An optional parameter passed into the accept method.

**Returns**: `any`, Any value may be returned when visiting an element.


## Class: StateMachine
An element within a state machine model that represents the root of the state machine model.

StateMachine extends the State class and inherits its public interface.

### fsm.StateMachine.StateMachine(name) 

Creates a new instance of the StateMachine class.

**Parameters**

**name**: `string`, The name of the state machine.


### fsm.StateMachine.root() 

Returns the root element within the state machine model.
Note that if this state machine is embeded within another state machine, the ultimate root element will be returned.

**Returns**: `StateMachine`, The root state machine element.

### fsm.StateMachine.bootstrap() 

Bootstraps the state machine model; precompiles the actions to take during transition traversal.

Bootstrapping a state machine model pre-calculates all the actions required for each transition within the state machine model.
The actions will exit all states as appropriate, perform transition behaviour, enter all states as appropriate and update the current state.

This is only required if you are dynamically changing the state machine model and want to manually control when the model is bootstrapped.


### fsm.StateMachine.initialise(instance, autoBootstrap) 

Initialises an instance of the state machine and enters its initial pseudo state.
Entering the initial pseudo state may cause a chain of other completion transitions.

**Parameters**

**instance**: `IActiveStateConfiguration`, The object representing a particular state machine instance.

**autoBootstrap**: `boolean`, Set to false to manually control when bootstrapping occurs.


### fsm.StateMachine.evaluate(message, instance) 

Evaluates a message to determine if a state transition can be made.
State machines initially delegate messages to their child regions for evaluation.

**Parameters**

**message**: `any`, The message that will be evaluated.

**instance**: `IActiveStateConfiguration`, The state machine instance.

**Returns**: `boolean`, True if the message triggered a state transition.

### fsm.StateMachine.isComplete(instance) 

Test a state machine instance to see if is it deemed to be complete.
A state machine is complete if all its regions are complete; a region is complete if their current state is a final state.

**Parameters**

**instance**: `IActiveStateConfiguration`, The state machine instance.

**Returns**: `boolean`, True if the state machine instance is complete.

### fsm.StateMachine.accept(visitor, arg1, arg2, arg3, arg4) 

Accepts an instance of a visitor and calls the visitStateMachine method on it.

**Parameters**

**visitor**: `Visitor.&lt;TArg1&gt;`, The visitor instance.

**arg1**: `TArg1`, An optional argument to pass into the visitor.

**arg2**: `any`, An optional argument to pass into the visitor.

**arg3**: `any`, An optional argument to pass into the visitor.

**arg4**: `any`, An optional argument to pass into the visitor.

**Returns**: `any`, Any value can be returned by the visitor.


## Class: StateMachineInstance
Default working implementation of a state machine instance class.

Implements the `IActiveStateConfiguration` interface.
It is possible to create other custom instance classes to manage state machine state in any way (e.g. as serialisable JSON); just implement the same members and methods as this class.

### fsm.StateMachineInstance.StateMachineInstance(name) 

Creates a new instance of the state machine instance class.

**Parameters**

**name**: `string`, The optional name of the state machine instance.


### fsm.StateMachineInstance.setCurrent(region, state) 

Updates the last known state for a given region.

**Parameters**

**region**: `Region`, The region to update the last known state for.

**state**: `State`, The last known state for the given region.


### fsm.StateMachineInstance.getCurrent(region) 

Returns the last known state for a given region.

**Parameters**

**region**: `Region`, The region to update the last known state for.

**Returns**: `State`, The last known state for the given region.

### fsm.StateMachineInstance.toString() 

Returns the name of the state machine instance.

**Returns**: `string`, The name of the state machine instance.


## Class: Transition
A transition between vertices (states or pseudo states) that may be traversed in response to a message.

Transitions come in a variety of types:
internal transitions respond to messages but do not cause a state transition, they only have behaviour;
local transitions are contained within a single region therefore the source vertex is exited, the transition traversed, and the target state entered;
external transitions are more complex in nature as they cross region boundaries, all elements up to but not not including the common ancestor are exited and entered.

Entering a composite state will cause the entry of the child regions within the composite state; this in turn may trigger more transitions.

### fsm.Transition.Transition(source, source) 

Creates a new instance of the Transition class.

**Parameters**

**source**: `Vertex`, The source of the transition.

**source**: `Vertex`, The target of the transition.


### fsm.Transition.else() 

Turns a transition into an else transition.

Else transitions can be used at `Junction` or `Choice` pseudo states if no other transition guards evaluate true, an Else transition if present will be traversed.

**Returns**: `Transition`, Returns the transition object to enable the fluent API.

### fsm.Transition.when(guard) 

Defines the guard condition for the transition.

**Parameters**

**guard**: `Guard`, The guard condition that must evaluate true for the transition to be traversed.

**Returns**: `Transition`, Returns the transition object to enable the fluent API.

### fsm.Transition.effect(transitionAction) 

Add behaviour to a transition.

**Parameters**

**transitionAction**: `Action`, The action to add to the transitions traversal behaviour.

**Returns**: `Transition`, Returns the transition object to enable the fluent API.

### fsm.Transition.accept(visitor, arg1, arg2, arg3, arg4) 

Accepts an instance of a visitor and calls the visitTransition method on it.

**Parameters**

**visitor**: `Visitor.&lt;TArg1&gt;`, The visitor instance.

**arg1**: `TArg1`, An optional argument to pass into the visitor.

**arg2**: `any`, An optional argument to pass into the visitor.

**arg3**: `any`, An optional argument to pass into the visitor.

**arg4**: `any`, An optional argument to pass into the visitor.

**Returns**: `any`, Any value can be returned by the visitor.



* * *










