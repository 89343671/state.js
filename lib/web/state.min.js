!function t(i,n,e){function o(s,a){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};i[s][0].call(p.exports,function(t){var n=i[s][1][t];return o(n?n:t)},p,p.exports,t,i,n,e)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<e.length;s++)o(e[s]);return o}({1:[function(t,i,n){"use strict";var e=this&&this.__extends||function(t,i){function n(){this.constructor=t}for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)};!function(t){t[t.Choice=0]="Choice",t[t.DeepHistory=1]="DeepHistory",t[t.Initial=2]="Initial",t[t.Junction=3]="Junction",t[t.ShallowHistory=4]="ShallowHistory"}(n.PseudoStateKind||(n.PseudoStateKind={}));var o=n.PseudoStateKind;!function(t){t[t.External=0]="External",t[t.Internal=1]="Internal",t[t.Local=2]="Local"}(n.TransitionKind||(n.TransitionKind={}));var r=n.TransitionKind,s=function(){function t(i,n){this.name=i,this.parent=n,this.qualifiedName=n?n.toString()+t.namespaceSeparator+i:i,console.log("created "+this)}return t.prototype.getRoot=function(){return this.parent.getRoot()},t.prototype.toString=function(){return this.qualifiedName},t.prototype.accept=function(t,i){t.visitElement(this,i)},t.namespaceSeparator=".",t}();n.NamedElement=s;var a=function(t){function i(i,n){t.call(this,i,n),this.vertices=new Array,this.parent.regions.push(this),this.getRoot().clean=!1}return e(i,t),i.prototype.accept=function(t,i){t.visitRegion(this,i)},i.defaultName="default",i}(s);n.Region=a;var u=function(t){function i(i,n){t.call(this,i,n instanceof a?n:n.getDefaultRegion()),this.outgoing=new Array,this.incoming=new Array,this.parent.vertices.push(this),this.getRoot().clean=!1}return e(i,t),i.prototype.to=function(t,i){return void 0===i&&(i=r.External),new f(this,t,i)},i.prototype.accept=function(t,i){t.visitVertex(this,i)},i}(s);n.Vertex=u;var c=function(t){function i(i,n,e){void 0===e&&(e=o.Initial),t.call(this,i,n),this.kind=e}return e(i,t),i.prototype.accept=function(t,i){t.visitPseudoState(this,i)},i}(u);n.PseudoState=c;var p=function(t){function i(i,n){t.call(this,i,n),this.regions=new Array}return e(i,t),i.prototype.getDefaultRegion=function(){return this.defaultRegion||(this.defaultRegion=new a(a.defaultName,this))},i.prototype.accept=function(t,i){t.visitState(this,i)},i}(u);n.State=p;var h=function(){function t(t){this.name=t,this.regions=new Array,this.defaultRegion=void 0,this.clean=!1}return t.prototype.getDefaultRegion=function(){return this.defaultRegion||(this.defaultRegion=new a(a.defaultName,this))},t.prototype.getRoot=function(){return this},t.prototype.accept=function(t,i){t.visitStateMachine(this,i)},t.prototype.toString=function(){return this.name},t}();n.StateMachine=h;var f=function(){function t(t,i,n){var e=this;void 0===n&&(n=r.External),this.source=t,this.target=i,this.kind=n,this.guard=t instanceof c?function(){return!0}:function(t){return t===e.source},this.source.outgoing.push(this),this.source.getRoot().clean=!1,this.target?this.target.incoming.push(this):this.kind=r.Internal,console.log("created transition from "+t+" to "+i)}return t.prototype.when=function(t){return this.guard=t,this},t.prototype.accept=function(t,i){t.visitTransition(this,i)},t}();n.Transition=f;var l=function(){function t(){}return t.prototype.visitElement=function(t,i){console.log("visiting "+t.toString())},t.prototype.visitRegion=function(t,i){this.visitElement(t,i)},t.prototype.visitVertex=function(t,i){this.visitElement(t,i)},t.prototype.visitPseudoState=function(t,i){this.visitVertex(t,i)},t.prototype.visitState=function(t,i){this.visitVertex(t,i)},t.prototype.visitStateMachine=function(t,i){for(var n=0,e=t.regions;n<e.length;n++){var o=e[n];o.accept(this,i)}this.visitElement(t,i)},t.prototype.visitTransition=function(t,i){},t}();n.Visitor=l},{}],2:[function(t,i,n){window[((document.currentScript||document.getElementsByTagName("script")[scripts.length-1]).attributes.target||{textContent:"fsm"}).textContent]=t("../lib/node/state.js")},{"../lib/node/state.js":1}]},{},[2]);
