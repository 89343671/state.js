# fsm

state v5 finite state machine library



* * *

## Class: Element
An abstract class used as the base for the Region and Vertex classess.
An element is any part of the tree structure that represents a composite state machine model.

**namespaceSeperator**: `string` , The symbol used to seperate element names within a fully qualified name.
Change this static member to create different styles of qualified name generated by the toString method.
### fsm.Element.toString() 

Returns a the element name as a fully qualified namespace.

**Returns**: `string`


## Class: Region
An element within a state machine model that is a container of Vertices.

Regions are implicitly inserted into composite state machines as a containner for vertices.
They only need to be explicitly defined if orthognal states are required.

Region extends the Element class and inherits its public interface.

**defaultName**: `string` , The name given to regions thare are created automatically when a state is passed as a vertex's parent.
Regions are automatically inserted into state machine models as the composite structure is built; they are named using this static member.
Update this static member to use a different name for default regions.
### fsm.Region.Region(name, state) 

Creates a new instance of the Region class.

**Parameters**

**name**: `string`, The name of the region.

**state**: `State`, The parent state that this region will be a child of.


### fsm.Region.isComplete(context) 

Tests a region to determine if it is deemed to be complete.
A region is complete if its current state is final (a state having on outbound transitions).

**Parameters**

**context**: `IContext`, The object representing a particualr state machine instance.

**Returns**: `boolean`, True if the region is deemed to be complete.


## Class: Vertex
An abstract element within a state machine model that can be the source or target of a transition (states and psuedo states).

Vertex extends the Element class and inherits its public interface.

### fsm.Vertex.isComplete(context) 

Tests the vertex to determine if it is deemed to be complete.
Pseudo states and simple states are always deemed to be complete.
Composite states are deemed to be complete when all its child regions all are complete.

**Parameters**

**context**: `IContext`, The object representing a particualr state machine instance.

**Returns**: `boolean`, True if the vertex is deemed to be complete.

### fsm.Vertex.to(target) 

Creates a new transtion from this vertex.
Newly created transitions are completion transtions; they will be evaluated after a vertex has been entered if it is deemed to be complete.
Transtiions can be converted to be event trigered by adding a guard condition via the transitions `where` method.

**Parameters**

**target**: `Vertex`, The destination of the transition; omit for internal transitions.

**Returns**: `Transition`, The new transition object.


## Class: PseudoState
An element within a state machine model that represents an transitory Vertex within the state machine model.

Pseudo states are required in all state machine models; at the very least, an `Initial` pseudo state is the default stating state when the parent region is entered.
Other types of pseudo state are available; typically for defining history semantics or to facilitate more complex transitions.
A `Terminate` pseudo state kind is also available to immediately terminate processing within the entire state machine instance.

PseudoState extends the Vertex class and inherits its public interface.

### fsm.PseudoState.PseudoState(name, state, kind) 

Creates a new instance of the PseudoState class.

**Parameters**

**name**: `string`, The name of the pseudo state.

**state**: `Element`, The parent element that this pseudo state will be a child of.

**kind**: `PseudoStateKind`, Determines the behaviour of the PseudoState.



## Class: State
An element within a state machine model that represents an invariant condition within the life of the state machine instance.

States are one of the fundamental building blocks of the state machine model.
Behaviour can be defined for both state entry and state exit.

State extends the Vertex class and inherits its public interface.

### fsm.State.State(name, element) 

Creates a new instance of the State class.

**Parameters**

**name**: `string`, The name of the state.

**element**: `Element`, The parent state that owns the state.


### fsm.State.isFinal() 

Tests the state to see if it is a final state;
a final state is one that has no outbound transitions.

**Returns**: `boolean`, True if the state is a final state.

### fsm.State.isSimple() 

Tests the state to see if it is a simple state;
a simple state is one that has no child regions.

**Returns**: `boolean`, True if the state is a simple state.

### fsm.State.isComposite() 

Tests the state to see if it is a composite state;
a composite state is one that has one or more child regions.

**Returns**: `boolean`, True if the state is a composite state.

### fsm.State.isOrthogonal() 

Tests the state to see if it is an orthogonal state;
an orthogonal state is one that has two or more child regions.

**Returns**: `boolean`, True if the state is an orthogonal state.

### fsm.State.exit(exitAction) 

Adds behaviour to a state that is executed each time the state is exited.

**Parameters**

**exitAction**: `Action`, The action to add to the state's exit behaviour.

**Returns**: `State`, Returns the state to allow a fluent style API.

### fsm.State.entry(entryAction) 

Adds behaviour to a state that is executed each time the state is entered.

**Parameters**

**entryAction**: `Action`, The action to add to the state's entry behaviour.

**Returns**: `State`, Returns the state to allow a fluent style API.


## Class: FinalState
An element within a state machine model that represents completion of the life of the containing Region within the state machine instance.

A final state cannot have outbound transitions.

FinalState extends the State class and inherits its public interface.

### fsm.FinalState.FinalState(name, element) 

Creates a new instance of the FinalState class.

**Parameters**

**name**: `string`, The name of the final state.

**element**: `Element`, The parent element that owns the final state.



## Class: StateMachine
An element within a state machine model that represents the root of the state machine model.

StateMachine extends the State class and inherits its public interface.

### fsm.StateMachine.StateMachine(name) 

Creates a new instance of the StateMachine class.

**Parameters**

**name**: `string`, The name of the state machine.


### fsm.StateMachine.bootstrap() 

Bootstraps the state machine model; precompiles the actions to take during transition traversal.

Bootstrapping a state machine model pre-calculates all the actions required for each transition within the state machine model.
The actions will exit all states as appropriate, perform transition behaviour, enter all states as appropriate and update the current state.

This is only required if you are dynamically changing the state machine model and want to manually control when the model is bootstrapped.


### fsm.StateMachine.initialise(context, autoBootstrap) 

Initialises an instance of the state machine and enters its initial pseudo state.
Entering the initial pseudo state may cause a chain of other completion transitions.

**Parameters**

**context**: `IContext`, The object representing a particualr state machine instance.

**autoBootstrap**: `boolean`, Set to false to manually control when bootstrapping occurs.


### fsm.StateMachine.evaluate(message, context, autoBootstrap) 

Passes a message to a state machine instance for evaluation.

The message will cause the guard conditions of outbound transitions from the current state to be evaluated; if a single guard evaluates true, it will trigger transition traversal.
Transiion traversal may cause a chain of transitions to be traversed.

**Parameters**

**message**: `any`, A message to pass to a state machine instance for evaluation that may cause a state transition.

**context**: `IContext`, The object representing a particualr state machine instance.

**autoBootstrap**: `boolean`, Set to false to manually control when bootstrapping occurs.

**Returns**: `boolean`, True if the method caused a state transition.


## Class: Transition
A transition between vertices (states or pseudo states) that may be traversed in response to a message.

Transitions come in a variedy of types:
internal transitions respond to messages but do not cause a state transition, they only have behaviour;
local transitions are contained within a single region therefore the source vetex is exited, the transition traversed, and the target state entered;
external transitions are more complex in nature as they cross region boundaries, all elements up to but not not including the common ancestor are exited and entered.

Entering a composite state will cause the entry of the child regions within the composite state; this in turn may trigger more transitions.

### fsm.Transition.Transition(source, source) 

Creates a new instance of the Transition class.

**Parameters**

**source**: `Vertex`, The source of the transition.

**source**: `Vertex`, The target of the transition.


### fsm.Transition.completion() 

Turns a transtion into a completion transition.

**Returns**: `Transition`, Returns the transition object to enable the fluent API.

### fsm.Transition.else() 

Turns a transition into an else transition.

Else tranitions can be used at `Junction` or `Choice` pseudo states if no other transition guards evaluate true, an Else transition if present will be traversed.

**Returns**: `Transition`, Returns the transition object to enable the fluent API.

### fsm.Transition.when(guard) 

Defines the guard condition for the transition.

**Parameters**

**guard**: `Guard`, The guard condition that must evaluate true for the transition to be traversed.

**Returns**: `Transition`, Returns the transition object to enable the fluent API.

### fsm.Transition.effect(transitionAction) 

Add behaviour to a transition.

**Parameters**

**transitionAction**: `Action`, The action to add to the transitions traversal behaviour.

**Returns**: `Transition`, Returns the transition object to enable the fluent API.


## Class: Context
Default working implementation of a state machine context class.

### fsm.Context.setCurrent(region, state) 

Updates the last known state for a given region.

**Parameters**

**region**: `Region`, The region to update the last known state for.

**state**: `State`, The last known state for the given region.


### fsm.Context.getCurrent(region) 

Returns the last known state for a given region.

**Parameters**

**region**: `Region`, The region to update the last known state for.

**Returns**: `State`, The last known state for the given region.



* * *










